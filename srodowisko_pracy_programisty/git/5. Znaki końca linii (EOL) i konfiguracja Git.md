# Lekcja 5: Znaki koÅ„ca linii (EOL) i konfiguracja Git  

## **1. Czym sÄ… znaki koÅ„ca linii?**  
KaÅ¼dy system operacyjny inaczej zapisuje koniec linii w plikach tekstowych:  

| **System operacyjny** | **Znak koÅ„ca linii (EOL)** | **Reprezentacja** |
|-----------------|-------------------|-------------------|
| **Windows** | `CRLF` (Carriage Return + Line Feed) | `\r\n`            |
| **Linux/macOS** | `LF` (Line Feed) | `\n`             |

JeÅ›li programista pracujÄ…cy na Windows zapisze plik w `CRLF`, a inny programista na Linux pobierze go jako `LF`, moÅ¼e to spowodowaÄ‡ niepotrzebne zmiany w Git, nawet jeÅ›li zawartoÅ›Ä‡ pliku siÄ™ nie zmieniÅ‚a.

---

## **2. Jak Git obsÅ‚uguje znaki koÅ„ca linii?**  

Git oferuje ustawienie **`core.autocrlf`**, ktÃ³re pomaga zarzÄ…dzaÄ‡ konwersjÄ… koÅ„cÃ³w linii podczas pobierania i commitowania plikÃ³w.  

### **ğŸ“Œ Ustawienie dla Windows**  
```sh
git config --global core.autocrlf true
```
ğŸ”¹ **Co robi?**  
- Podczas pobierania (`git checkout`, `git pull`) **zamienia `LF` â†’ `CRLF`**  
- Podczas commitowania (`git add`, `git commit`) **zamienia `CRLF` â†’ `LF`**  

ğŸ”¹ **Dlaczego?**  
Windows domyÅ›lnie uÅ¼ywa `CRLF`, ale Git konwertuje pliki do `LF` w repozytorium, aby byÅ‚y zgodne z innymi systemami.  

### **ğŸ“Œ Ustawienie dla Linux/macOS**  
```sh
git config --global core.autocrlf input
```
ğŸ”¹ **Co robi?**  
- Podczas pobierania (`git checkout`, `git pull`) **nie zmienia niczego**  
- Podczas commitowania (`git add`, `git commit`) **zamienia `CRLF` â†’ `LF`**, jeÅ›li wystÄ™pujÄ…  

ğŸ”¹ **Dlaczego?**  
Linux/macOS uÅ¼ywajÄ… `LF`, wiÄ™c Git **nie ingeruje w pobrane pliki**, ale konwertuje `CRLF` na `LF` podczas commitowania, aby uniknÄ…Ä‡ problemÃ³w.

### **ğŸ“Œ WyÅ‚Ä…czenie konwersji znakÃ³w koÅ„ca linii**  
JeÅ›li nie chcesz, aby Git automatycznie konwertowaÅ‚ koÅ„ce linii, moÅ¼esz caÅ‚kowicie wyÅ‚Ä…czyÄ‡ tÄ™ funkcjÄ™:  
```sh
git config --global core.autocrlf false
```
**Uwaga:** MoÅ¼e to prowadziÄ‡ do sytuacji, w ktÃ³rej pliki w repozytorium majÄ… mieszane koÅ„ce linii.

---

## **3. Ustalanie reguÅ‚ znakÃ³w koÅ„ca linii w `.gitattributes`**  
Aby wymusiÄ‡ okreÅ›lone zakoÅ„czenia linii dla plikÃ³w w repozytorium, moÅ¼na dodaÄ‡ plik **`.gitattributes`** do katalogu gÅ‚Ã³wnego projektu.  

PrzykÅ‚adowe ustawienia:  
```sh
# Ustawienie domyÅ›lne â€“ automatyczna konwersja
* text=auto

# Wymuszenie LF dla plikÃ³w kodu
*.sh text eol=lf
*.js text eol=lf
*.py text eol=lf

# Wymuszenie CRLF dla skryptÃ³w Windows
*.bat text eol=crlf
*.cmd text eol=crlf

# Ignorowanie zmian w koÅ„cach linii dla plikÃ³w binarnych
*.png binary
*.jpg binary
```

---

## **4. Sprawdzanie i naprawianie problemÃ³w z koÅ„cami linii**  

### **ğŸ“Œ Sprawdzenie obecnej konfiguracji Git**
Aby sprawdziÄ‡, jakie ustawienie `core.autocrlf` masz obecnie w systemie:  
```sh
git config --global core.autocrlf
```

### **ğŸ“Œ Naprawa koÅ„cÃ³w linii w repozytorium**
JeÅ›li pliki w repozytorium majÄ… niepoprawne koÅ„ce linii, moÅ¼na je naprawiÄ‡:
```sh
git rm --cached -r .
git reset --hard
```
To spowoduje usuniÄ™cie plikÃ³w ze stageâ€™a i pobranie ich ponownie z poprawnymi znakami koÅ„ca linii.

---

## **5. Ä†wiczenie: Poprawianie znakÃ³w koÅ„ca linii w zespole**  
**Cel:** ZespÃ³Å‚ pracuje na rÃ³Å¼nych systemach (Windows/Linux/macOS) i musi ustaliÄ‡ jednolite zakoÅ„czenia linii w repozytorium.  

1. KaÅ¼dy czÅ‚onek zespoÅ‚u sprawdza swoje ustawienia:
   ```sh
   git config --global core.autocrlf
   ```
2. JeÅ›li pracuje na **Windows**, ustawia:
   ```sh
   git config --global core.autocrlf true
   ```
   JeÅ›li pracuje na **Linux/macOS**, ustawia:
   ```sh
   git config --global core.autocrlf input
   ```
3. KaÅ¼dy tworzy plik `eol_test.txt` i dodaje kilka linii tekstu.
4. WysyÅ‚ajÄ… plik do GitHub.
5. PobierajÄ… plik na inny system operacyjny i sprawdzajÄ…, czy koÅ„ce linii sÄ… poprawnie konwertowane:
   ```sh
   file eol_test.txt
   ```
6. ZespÃ³Å‚ analizuje wyniki i ewentualnie dodaje `.gitattributes` do repozytorium.

---

## **ğŸš€ Podsumowanie**  

| Ustawienie  | Windows | Linux/macOS |
|------------|---------|-------------|
| `true`     | Pobiera `LF` jako `CRLF`, commit `CRLF` jako `LF` | âŒ Nie uÅ¼ywaÄ‡ |
| `input`    | âŒ Nie uÅ¼ywaÄ‡ | Pobiera `LF` jako `LF`, commit `CRLF` jako `LF` |
| `false`    | Nie zmienia nic | Nie zmienia nic |

ğŸ“Œ **Rekomendacja**:  
- **Windows** â†’ `core.autocrlf true`  
- **Linux/macOS** â†’ `core.autocrlf input`  
- **Dodanie `.gitattributes`** â†’ wymusza jednolite zakoÅ„czenia linii niezaleÅ¼nie od systemu  

DziÄ™ki temu unikniesz niepotrzebnych zmian w Git wynikajÄ…cych z rÃ³Å¼nych systemÃ³w operacyjnych! ğŸš€  
