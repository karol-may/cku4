# Lekcja 4: Zaawansowane operacje Git  

## **1. Klucze SSH i bezpieczne poÅ‚Ä…czenie z GitHub**  

### **ğŸ“Œ Dlaczego warto uÅ¼ywaÄ‡ SSH zamiast HTTPS?**
DomyÅ›lnie Git pozwala na klonowanie repozytoriÃ³w przez **HTTPS**, co wymaga podawania loginu i hasÅ‚a przy kaÅ¼dym pushu/pullu.  
Zamiast tego moÅ¼na uÅ¼ywaÄ‡ **SSH**, ktÃ³ry pozwala na automatyczne uwierzytelnianie **bez koniecznoÅ›ci wpisywania hasÅ‚a**.  

### **ğŸ”¹ Tworzenie klucza SSH**
1. **Sprawdzenie, czy masz juÅ¼ klucz SSH**  
   ```sh
   ls -al ~/.ssh
   ```
   JeÅ›li widzisz plik `id_ed25519.pub`, oznacza to, Å¼e masz juÅ¼ klucz.

2. **Generowanie nowego klucza (zalecany algorytm Ed25519)**  
   ```sh
   ssh-keygen -t ed25519 -C "twÃ³j_email@example.com"
   ```

3. **Dodanie klucza do agenta SSH**  
   ```sh
   eval "$(ssh-agent -s)"
   ssh-add ~/.ssh/id_ed25519
   ```

4. **Dodanie klucza do GitHub**  
   - Skopiuj klucz publiczny:
     ```sh
     cat ~/.ssh/id_ed25519.pub
     ```
   - WejdÅº w **GitHub â†’ Settings â†’ SSH and GPG keys** â†’ **New SSH key** i wklej skopiowany klucz.

5. **Testowanie poÅ‚Ä…czenia**  
   ```sh
   ssh -T git@github.com
   ```
   JeÅ›li wszystko dziaÅ‚a poprawnie, zobaczysz komunikat:
   ```sh
   Hi your-github-username! You've successfully authenticated, but GitHub does not provide shell access.
   ```

---

## **2. Interaktywne rebase â€“ poprawianie historii commitÃ³w**  

### **ğŸ“Œ Czym jest `rebase`?**
`git rebase` pozwala **przepisaÄ‡ historiÄ™ commitÃ³w**, np. usunÄ…Ä‡ zbÄ™dne commity, poÅ‚Ä…czyÄ‡ je w jeden lub zmieniÄ‡ ich kolejnoÅ›Ä‡.  

ğŸ”¹ **ZwykÅ‚y `merge`** tworzy dodatkowe commity scalajÄ…ce:  
```
* commit A
|| * commit B (nowy branch)
|/
* commit C (scalajÄ…cy)
```
ğŸ”¹ **`rebase`** sprawia, Å¼e branch wyglÄ…da tak, jakby zmiany byÅ‚y wprowadzone liniowo:  
```
* commit A
* commit B (po rebase)
```

### **ğŸ”¹ Interaktywne rebase â€“ zmiana historii commitÃ³w**  
1. Sprawdzenie historii commitÃ³w:
   ```sh
   git log --oneline --graph --decorate --all
   ```
2. PrzejÅ›cie do rebase dla ostatnich 3 commitÃ³w:
   ```sh
   git rebase -i HEAD~3
   ```
3. W edytorze zobaczysz coÅ› takiego:
   ```
   pick f7ca2c3 Dodano nowÄ… funkcjÄ™
   pick 9cfa4a1 Poprawiono bÅ‚Ä…d
   pick a1b2c3d Drobna poprawka
   ```
   MoÅ¼esz:
   - **ZmieniÄ‡ `pick` na `squash`**, aby poÅ‚Ä…czyÄ‡ commity.
   - **ZamieniÄ‡ ich kolejnoÅ›Ä‡**.
   - **ZmieniÄ‡ opis commitÃ³w (`reword`)**.

4. JeÅ›li pojawi siÄ™ konflikt podczas `rebase`, rozwiÄ…zujesz go i kontynuujesz:
   ```sh
   git rebase --continue
   ```

---

## **3. Cofanie commitÃ³w i przywracanie zmian**  

### **ğŸ“Œ `git reset` vs `git revert` â€“ jaka jest rÃ³Å¼nica?**  

| **Polecenie** | **DziaÅ‚anie** | **Kiedy uÅ¼ywaÄ‡?** |
|--------------|-------------|----------------|
| `git reset --soft HEAD~1` | CofniÄ™cie commita, ale **zachowanie zmian w staging area** | JeÅ›li chcesz poprawiÄ‡ ostatni commit |
| `git reset --hard HEAD~1` | CofniÄ™cie commita i **usuniÄ™cie zmian** | JeÅ›li chcesz caÅ‚kowicie cofnÄ…Ä‡ zmiany |
| `git revert HEAD` | Tworzy nowy commit **odwracajÄ…cy** ostatniÄ… zmianÄ™ | JeÅ›li chcesz cofnÄ…Ä‡ commit bez zmiany historii |

### **ğŸ”¹ PrzykÅ‚ady uÅ¼ycia**  

1. **CofniÄ™cie ostatniego commita (ale zachowanie zmian):**  
   ```sh
   git reset --soft HEAD~1
   ```

2. **CofniÄ™cie ostatniego commita i usuniÄ™cie zmian:**  
   ```sh
   git reset --hard HEAD~1
   ```

3. **CofniÄ™cie commitÃ³w, ale zachowanie ich w historii (`revert` zamiast `reset`)**  
   ```sh
   git revert HEAD
   ```

4. **PrzywrÃ³cenie pliku do stanu z ostatniego commita:**  
   ```sh
   git checkout -- plik.txt
   ```

---

## **4. WspÃ³lne Ä‡wiczenie dla 15 osÃ³b: Cofanie zmian i poprawianie historii commitÃ³w**  

### **ğŸ“Œ Cel Ä‡wiczenia**  
ZespÃ³Å‚ wspÃ³lnie pracuje nad kodem i **uczy siÄ™ przywracaÄ‡ zmiany oraz edytowaÄ‡ historiÄ™ commitÃ³w**.

### **ğŸ”¹ Plan Ä‡wiczenia**  
1. **KaÅ¼dy tworzy nowÄ… gaÅ‚Ä…Åº i commit:**  
   ```sh
   git checkout -b poprawki
   echo "Nowa funkcja" >> app.js
   git add app.js
   git commit -m "Dodano nowÄ… funkcjÄ™"
   ```
2. **Jedna osoba popeÅ‚nia bÅ‚Ä…d i commit:**  
   ```sh
   echo "BÅÄ„D!" >> app.js
   git commit -am "BÅ‚Ä™dna zmiana"
   ```
3. **ZespÃ³Å‚ sprawdza historiÄ™ commitÃ³w:**  
   ```sh
   git log --oneline --graph
   ```
4. **CofniÄ™cie bÅ‚Ä™dnego commita (`reset` lub `revert`)**  
   - JeÅ›li bÅ‚Ä™dny commit nie zostaÅ‚ jeszcze wysÅ‚any:
     ```sh
     git reset --soft HEAD~1
     ```
   - JeÅ›li commit zostaÅ‚ juÅ¼ wypchniÄ™ty na GitHub:
     ```sh
     git revert HEAD
     git push origin poprawki
     ```
5. **Scalanie poprawek do `main` po wycofaniu bÅ‚Ä™du:**  
   ```sh
   git checkout main
   git merge poprawki
   git push origin main
   ```

---

## **ğŸš€ Podsumowanie**  
ğŸ“Œ **Co nauczyliÅ›my siÄ™ w tej lekcji?**  

âœ” **Klucze SSH** â€“ jak skonfigurowaÄ‡ GitHub bez hasÅ‚a.  
âœ” **Rebase** â€“ jak poprawiaÄ‡ historiÄ™ commitÃ³w.  
âœ” **Reset vs Revert** â€“ jak cofaÄ‡ zmiany bez uszkodzenia repozytorium.  
âœ” **Ä†wiczenie zespoÅ‚owe** â€“ jak przywracaÄ‡ poprawki w realnym projekcie.

Teraz TwÃ³j zespÃ³Å‚ moÅ¼e efektywnie wspÃ³Å‚pracowaÄ‡ i zarzÄ…dzaÄ‡ historiÄ… zmian! ğŸš€  
