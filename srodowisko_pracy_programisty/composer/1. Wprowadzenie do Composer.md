# Lekcja 1: Wprowadzenie do Composer

## 1. Czym jest Composer?
Composer to narzÄ™dzie do zarzÄ…dzania zaleÅ¼noÅ›ciami w PHP, ktÃ³re umoÅ¼liwia:
- âœ… Automatyczne pobieranie bibliotek i frameworkÃ³w.
- âœ… ZarzÄ…dzanie wersjami pakietÃ³w.
- âœ… Åatwe aktualizowanie zaleÅ¼noÅ›ci.
- âœ… Autoloading klas PHP.

## 2. Instalacja Composer

### **Windows:**
1. Pobierz i uruchom instalator z [getcomposer.org](https://getcomposer.org/download/).
2. Dodaj Composer do zmiennych Å›rodowiskowych (jeÅ›li nie zrobiÅ‚ tego instalator).
3. SprawdÅº instalacjÄ™:
   ```sh
   composer --version
   ```

### **Linux / macOS:**
1. Pobierz i zainstaluj Composer w terminalu:
   ```sh
   curl -sS https://getcomposer.org/installer | php
   sudo mv composer.phar /usr/local/bin/composer
   ```
2. SprawdÅº instalacjÄ™:
   ```sh
   composer --version
   ```

## 3. Inicjalizacja projektu z Composer
Aby rozpoczÄ…Ä‡ projekt PHP z Composerem:
1. W katalogu projektu uruchom:
   ```sh
   composer init
   ```
   NastÄ™pnie postÄ™puj zgodnie z instrukcjami kreatora.
2. Powstanie plik `composer.json`, ktÃ³ry zawiera informacje o zaleÅ¼noÅ›ciach.

## 4. Instalowanie pakietÃ³w
Aby zainstalowaÄ‡ bibliotekÄ™, np. `monolog/monolog`:
```sh
composer require monolog/monolog
```
Composer utworzy pliki:
- `composer.json` â€“ zapisuje informacje o zaleÅ¼noÅ›ciach.
- `composer.lock` â€“ zapisuje konkretne wersje zainstalowanych pakietÃ³w.
- `vendor/` â€“ katalog, w ktÃ³rym znajdujÄ… siÄ™ pobrane biblioteki.

## 5. Autoloading klas PHP
Composer generuje automatyczne Å‚adowanie klas (`vendor/autoload.php`):
```php
require 'vendor/autoload.php';
use Monolog\Logger;
use Monolog\Handler\StreamHandler;

$log = new Logger('app');
$log->pushHandler(new StreamHandler('app.log', Logger::WARNING));
$log->warning('To jest ostrzeÅ¼enie!');
```

## 6. Aktualizacja i usuwanie pakietÃ³w
- **Aktualizacja wszystkich pakietÃ³w:**  
  ```sh
  composer update
  ```
- **UsuniÄ™cie pakietu:**  
  ```sh
  composer remove monolog/monolog
  ```

## 7. UÅ¼ycie Composera w Dockerze
JeÅ›li pracujemy w Å›rodowisku **Docker**, moÅ¼emy uÅ¼yÄ‡ Composera w kontenerze zamiast instalowaÄ‡ go lokalnie. SÄ… dwa sposoby na dodanie Composera do kontenera PHP:

### **Opcja 1: UÅ¼ycie obrazu PHP z Composerem**
W oficjalnym obrazie PHP dostÄ™pna jest wersja z Composerem. MoÅ¼emy uÅ¼yÄ‡ gotowego obrazu:
```dockerfile
FROM php:8.2-cli  
COPY --from=composer:latest /usr/bin/composer /usr/bin/composer  
```
DziÄ™ki temu Composer zostanie pobrany i bÄ™dzie dostÄ™pny w kontenerze.

### **Opcja 2: Dodanie Composera do kontenera rÄ™cznie**
JeÅ›li uÅ¼ywasz wÅ‚asnego obrazu PHP, moÅ¼esz dodaÄ‡ Composer w `Dockerfile`:
```dockerfile
FROM php:8.2-cli

RUN apt-get update && apt-get install -y curl unzip \
    && curl -sS https://getcomposer.org/installer | php \
    && mv composer.phar /usr/local/bin/composer
```

Teraz Composer bÄ™dzie dostÄ™pny w kontenerze.

## 8. Uruchamianie Composer w kontenerze
Gdy mamy uruchomiony kontener PHP, moÅ¼emy uÅ¼ywaÄ‡ Composera bezpoÅ›rednio w Å›rodku kontenera:
```sh
docker run --rm -v $(pwd):/app -w /app composer install
```
Lub jeÅ›li Composer jest juÅ¼ w kontenerze PHP:
```sh
docker exec -it php-container-name composer install
```

JeÅ›li uÅ¼ywasz **Docker Compose**, moÅ¼esz dodaÄ‡ Composer do `php` w `docker-compose.yml`:
```yaml
services:
  php:
    image: php:8.2-cli
    volumes:
      - .:/var/www
    working_dir: /var/www
    entrypoint: [ "composer" ]
```
A nastÄ™pnie uruchomiÄ‡ Composer w kontenerze:
```sh
docker compose run php install
```

## ğŸ“Œ Podsumowanie
- âœ… Composer to podstawowe narzÄ™dzie do zarzÄ…dzania zaleÅ¼noÅ›ciami w PHP.
- âœ… Pozwala instalowaÄ‡, aktualizowaÄ‡ i usuwaÄ‡ biblioteki.
- âœ… Autoloading upraszcza pracÄ™ z klasami PHP.
- âœ… MoÅ¼esz uÅ¼yÄ‡ Composer w kontenerze Docker zamiast instalowaÄ‡ go lokalnie.

### **Ä†wiczenie:**
Zainstaluj Composer i pobierz bibliotekÄ™ `monolog/monolog`. NastÄ™pnie utwÃ³rz skrypt logujÄ…cy bÅ‚Ä™dy do pliku.

