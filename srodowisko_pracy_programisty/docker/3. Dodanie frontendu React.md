# ğŸ•’ 3. Dodanie frontendu React (45 min) â€“ Scenariusz Lekcji

## ğŸŒŸ Cel lekcji
Po tej lekcji uczestnicy bÄ™dÄ… w stanie:
- ZintegrowaÄ‡ frontend napisany w React z istniejÄ…cym Å›rodowiskiem Docker.
- UruchomiÄ‡ serwer deweloperski React w kontenerze komunikujÄ…cym siÄ™ z backendem (PHP i MySQL).

---

## ğŸ“Œ Plan lekcji

### 1. Wprowadzenie do Reacta (10 min)
- Czym jest React? Dlaczego warto go uÅ¼ywaÄ‡?
   - Zalety: wirtualny DOM, modularna architektura oparta o komponenty, duÅ¼a spoÅ‚ecznoÅ›Ä‡.
   - Single Page Application (SPA) i szybsze dziaÅ‚anie w porÃ³wnaniu do tradycyjnych rozwiÄ…zaÅ„.
- Kluczowe pojÄ™cia Reacta:
   - Komponenty funkcyjne i klasowe (ogÃ³lnie).
   - ZarzÄ…dzanie stanem za pomocÄ… useState i useEffect.
   - Kompozycja i reuÅ¼ywalnoÅ›Ä‡ kodu.
- W jaki sposÃ³b Node.js wspomaga rozwÃ³j aplikacji w React:
   - Szybkie tworzenie Å›rodowiska deweloperskiego.
   - MoÅ¼liwoÅ›Ä‡ budowania aplikacji produkcyjnej (npm run build).
- Rola Dockera:
   - Uruchamianie serwera deweloperskiego React w odizolowanym kontenerze.
   - Åatwe skalowanie i replikacja Å›rodowiska.

---

### 2. Tworzenie struktury dla frontendu (15 min)

1. **Katalog projektu React**  
   PrzykÅ‚adowa struktura:
   ```
   .
   â”œâ”€â”€ project        # katalog z kodem backendu
   â”œâ”€â”€ docker         # katalog z plikami Docker
   â”‚   â”œâ”€â”€ node       # nowy katalog na plik Dockerfile do React
   â”œâ”€â”€ frontend       # katalog na kod React
   â”‚   â”œâ”€â”€ package.json
   â”‚   â”œâ”€â”€ src
   â”‚   â””â”€â”€ public
   â””â”€â”€ docker-compose.yml
   ```
2. **Plik Dockerfile w katalogu docker/node**  
   Najpierw tworzymy katalog i plik:
   ```bash
   mkdir -p docker/node
   touch docker/node/Dockerfile
   ```
   PrzykÅ‚adowa zawartoÅ›Ä‡ pliku `docker/node/Dockerfile`:
   ```dockerfile
    FROM node:18-alpine
    WORKDIR /app
    # Kopiujemy pliki package.json i package-lock.json z katalogu frontend
    COPY package*.json ./
    RUN npm install
    # Kopiujemy resztÄ™ plikÃ³w z katalogu frontend
    COPY . .
    EXPOSE 3000
    CMD ["npm", "start"]
   ```
---

### 3. Tworzymy pliki projektu React (15 min)
    npx create-react-app .

### 4. Dodanie pliku .dockerignore (5 min)

Dodamy plik:

    touch docker/.dockerignore

I dodamy do niego:
```
node_modules
.git
.gitignore
.DS_Store
.env
```


### 5. Aktualizacja docker-compose.yml (15 min)

Rozszerzamy istniejÄ…cy plik `docker-compose.yml` (z poprzednich lekcji) o usÅ‚ugÄ™ `frontend`:
```yaml
    frontend:
        ports:
            - "3000:3000"
        build:
            context: ../frontend
            dockerfile: ../docker/node/Dockerfile
        container_name: react-frontend
        volumes:
            - ../frontend:/app
            - /app/node_modules
        networks:
            - app_network
```

**WyjaÅ›nienie:**
- `context: ../frontend` â€“ wskazuje na katalog, gdzie znajduje siÄ™ kod React.
- `dockerfile: docker/node/Dockerfile` â€“ Å›cieÅ¼ka do nowego Dockerfile dla Reacta.
- `ports: ["3000:3000"]` â€“ wystawienie portu 3000 dla lokalnego serwera deweloperskiego React.

---

#### PrzykÅ‚adowy minimalny kod PHP (project/index.php)
```php
<?php
header('Content-Type: application/json');

echo json_encode([
    'message' => 'Hello from PHP!'
]);
```

#### PrzykÅ‚adowy kod wywoÅ‚ania w React (frontend/src/App.js)
```jsx
import { useState, useEffect } from 'react';

function App() {
  const [message, setMessage] = useState('');

  useEffect(() => {
    fetch('http://localhost:8080/')
      .then((res) => res.json())
      .then((data) => {
        setMessage(data.message);
      })
      .catch((err) => console.error(err));
  }, []);

  return (
    <div>
      <h1>Simple Fetch Example</h1>
      <p>{message}</p>
    </div>
  );
}

export default App;
```
### 6. BÅ‚Ä…d CORS (Cross-Origin Resource Sharing)

Jednym z najczÄ™stszych bÅ‚Ä™dÃ³w, jakie moÅ¼e napotkaÄ‡ programista integrujÄ…cy API to CORS

PrzeglÄ…darka blokuje zapytania do innych domen niÅ¼ ta, z ktÃ³rej zostaÅ‚a zaÅ‚adowana strona.

RozwiÄ…zaniem jest dodanie nagÅ‚Ã³wka `Access-Control-Allow-Origin` do odpowiedzi serwera lub PHP.

```
server {
    # ....
    index index.php;

    add_header Access-Control-Allow-Origin "*" always;
    add_header Access-Control-Allow-Methods "GET, POST, PUT, DELETE, OPTIONS" always;
    add_header Access-Control-Allow-Headers "Content-Type, Authorization" always;
    add_header Access-Control-Allow-Credentials "true" always;

    location / {
        try_files $uri $uri/ /index.php?$args;
    }
    # ....
}

```

NastÄ™pnie restartujemy serwer Nginx
```
    docker restart nginx-container
```

### 5. Podsumowanie lekcji (5 min)

**Co uczestnicy osiÄ…gnÄ™li?**
- Dodali React do istniejÄ…cego Å›rodowiska Docker.
- Nauczyli siÄ™ tworzyÄ‡ kontener z serwerem deweloperskim React (Node.js).
- Uzyskali komunikacjÄ™ miÄ™dzy frontendem (React) a backendem (PHP + MySQL) za poÅ›rednictwem Dockera.

**Pytania i odpowiedzi** â€“ omÃ³wienie napotkanych problemÃ³w.

---

Karol May Â© 2025

